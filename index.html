<!DOCTYPE html>
<html>
    <head>
        <title>Dictionary Look up </title>
    </head>
    <body>
        <header>
            <h1>Web Dictionary</h1>
        </header>
        <main>
            <p>Lookup the definition of a word (e.g. ajax, html, bar, php, javascript or css)</p>
            
            <form>
                <input type="text" name="word"/> 
                <button id="search">Search</button>
            </form>
            
            <hr>
            <section>
                <h3>Result</h3>
                <div id="result"></div>
            </section>
        </main>
        <div id="response"></div>
        
        
        <script type="text/javascript">
        let search = document.querySelector('button#search');
        let result = document.querySelector("#result");
        var httpRequest = new XMLHttpRequest();
        search.addEventListener('click', function(e) {
            e.preventDefault();
            console.log("button clicked");
            let word = document.querySelector("input").value;
            var url = "https://info2180-lab6-nnawdr.c9users.io/request.php";
            url += `?q=${word}`;
            httpRequest.onreadystatechange = getResponse;
            httpRequest.open('GET', url);
            httpRequest.send();
        });
        
        function getResponse() {
            if (httpRequest.readyState === XMLHttpRequest.DONE) {
                if (httpRequest.status === 200) {
                    var response = httpRequest.responseText;
                    result.innerHTML = response;
                   // alert(response);
                } else {
                    alert('There was a problem with the request.');
                }
            }
        }
    </script>
    </body>
</html>